{% extends "download/_base_download.html" %}

{% block title %}Get OpenStack Autopilot to run an Ubuntu cloud | Download{% endblock %}

{% block extra_body_class %}download-cloud-home{% endblock %}

{% block second_level_nav_items %}
	{% include "templates/_nav_breadcrumb.html" with section_title="Download" page_title="Cloud"  %}
{% endblock second_level_nav_items %}

{% block content %}
<section class="row row-grey">
  <div class="nine-col">
    <h1>Download OpenStack Autopilot to run an Ubuntu&nbsp;Cloud</h1>
    <p class="intro">Canonical&rsquo;s <a href="/cloud/openstack/autopilot">OpenStack Autopilot</a> fully automates the deployment of an OpenStack Cloud &mdash; just add <abbr title="Virtual Machines">VMs</abbr> or servers.</p>
  </div>
  <div class="twelve-col box box-highlight vertical-divider">
    <div class="six-col no-margin-bottom">
      <h2>Test drive OpenStack Autopilot appliance for VMware</h2>
      <p>Complete the form and download the vSphere appliance test drive of OpenStack Autopilot and see what it&rsquo;s like to install an OpenStack cloud in minutes.</p>
      <p><a href="/download/cloud/install-autopilot-testdrive">Instructions for the OpenStack Autopilot test drive&nbsp;&rsaquo;</a></p>
    </div>
    <div class="six-col last-col">
      <form action="https://pages.ubuntu.com/index.php/leadCapture/save" method="post" id="form-download-marketo">
        <fieldset>
          <ul class="no-bullets">
            <li>
              <label for="FirstName" class="mktoLabel">First name: <span>*</span></label>
              <input required id="FirstName" name="FirstName" maxlength="255" type="text" class="mktoField mktoRequired" />
            </li>
            <li>
              <label for="LastName" class="mktoLabel">Last name: <span>*</span></label>
              <input required id="LastName" name="LastName" maxlength="255" type="text" class="mktoField mktoRequired" />
            </li>
            <li>
              <label for="Company" class="mktoLabel">Company name: <span>*</span></label>
              <input required id="Company" name="Company" maxlength="255" type="text" class="mktoField mktoRequired" />
            </li>
            <li>
              <label for="Email" class="mktoLabel">Email address: <span>*</span></label>
              <input required id="Email" name="Email" maxlength="255" type="email" class="mktoField mktoEmailField mktoRequired" />
            </li>
            <li>
              <label for="Phone" class="mktoLabel">Phone number: <span>*</span></label>
              <input required id="Phone" name="Phone" maxlength="255" type="tel" class="mktoField mktoTelField mktoRequired" />
            </li>
            <li>
              <input type="hidden" name="lpId" class="mktoField" value="2287" />
              <input type="hidden" name="subId" class="mktoField" value="30" />
              <input type="hidden" name="munchkinId" class="mktoField" value="066-EOV-335" />
              <input type="hidden" name="lpurl" class="mktoField" value="//pages.ubuntu.com/Form---Autopilot-VM-download_Landing-page.html?cr={creative}&amp;kw={keyword}" />
              <input type="hidden" name="cr" class="mktoField" value="" />
              <input type="hidden" name="kw" class="mktoField" value="" />
              <input type="hidden" name="q" class="mktoField" value="">
              <input type="hidden" name="formid" class="mktoField" value="1325" />
              <input type="hidden" name="returnURL" value="http://www.ubuntu.com/download/cloud/thank-you" />
              <input type="hidden" name="retURL" value="http://www.ubuntu.com/download/cloud/thank-you" />
              <button type="submit">Download</button>
            </li>
          </ul>
        </fieldset>
      </form>
    </div>
  </div>
</section>

<section class="row row-grey">
  <div class="eight-col">
    <h2>Install OpenStack Autopilot on your&nbsp;hardware</h2>
    <p>OpenStack Autopilot is the world&rsquo;s easiest dynamic OpenStack installer. It handles every aspect of your cloud both during installation, expansion, and everyday operations. To start, you will need at least five machines with two disks each. Two machines need to have two network interfaces (NICs).</p>
    <p><a href="/download/cloud/install-ubuntu-openstack">Instructions for installing OpenStack Autopilot&nbsp;&rsaquo;</a></p>
  </div>
</section>
{% include "download/server/_other-ways.html" %}

{% endblock content %}
{% block footer_extra %}
  {{ marketo }}
  <!-- dependencies -->
  <script src="https://assets.ubuntu.com/v1/ec520d10-XMLHttpRequest.min.js"></script>
  <script src="https://assets.ubuntu.com/v1/347fff52-serialize.js"></script>
  <script src="https://assets.ubuntu.com/v1/6b7597df-event-listener-polyfill.js"></script>
  <!-- script -->
  <script>
    /**
     * Given a form element, extract its data and its "action" target URL
     * and submit the form using Ajax
     */
    backgroundSubmit = function (formElement, submitCallback) {
      var request = new XMLHttpRequest();
      var submitUrl = formElement.getAttribute('action');
      var formData = serialize(formElement)

      request.open("POST", submitUrl, true);

      //Send the proper header information along with the request
      request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

      // When request has finished, call the callback function
      if (submitCallback) {
        request.addEventListener(
          'readystatechange',
          function() {
            if (this.readyState == 4) {
              // Pass context and arguments on to submitCallback
              submitCallback.apply(this, arguments);
            }
          }
        );
      }

      // Send off the POST request
      request.send(formData);
    }

    /**
     * Handler for a form submit event
     * to disable the normal submit, and instead use backgroundSubmit
     */
    backgroundSubmitHandler = function (submitEvent) {
      // Prevent normal submit
      event.preventDefault ? event.preventDefault() : event.returnValue = false;
      // Submit the form in the background
      backgroundSubmit(marketoForm);
    }

    // Get the form
    marketoForm = document.getElementById('form-download-marketo');

    // Attach the submit handler to the form
    // @TODO: Find a way around the Cross-Origin Policy problem

    // Until we solve cross-origin, this and everything after it should remain
    // disabled.

    // This shouldn't be a blocker for release, as the NoScript version
    // (i.e. submitting the form normally and sending them to thank-you page)
    // is a perfectly good solution.

    //marketoForm.addEventListener('submit', submitHandler)

    // @TODO: Next we should:
    // - kick off the download (window.location.href = {downloadUrl})
    // - redirect to instructions page (window.location.href = {instructionsUrl})
  </script>
{% endblock footer_extra %}
